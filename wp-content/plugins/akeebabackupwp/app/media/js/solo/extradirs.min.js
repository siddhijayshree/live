/*
   2014-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"==typeof Solo)var Solo={};"undefined"==typeof Solo.Extradirs&&(Solo.Extradirs={});Solo.Extradirs.render=function(a){var e=document.getElementById("ak_list_contents");e.innerHTML="";for(rootname in a)a.hasOwnProperty(rootname)&&Solo.Extradirs.addRow(rootname,a[rootname],e);Solo.Extradirs.addNewRecordButton(e)};
Solo.Extradirs.addRow=function(a,e,m){var h=document.createElement("tr");h.className="ak_filter_row";Solo.System.data.set(h,"rootuuid",a);Solo.System.data.set(h,"def",e);a=document.createElement("td");var n=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),b=document.createElement("span");b.className="ak_filter_tab_icon_container btn btn-sm btn-danger delete";Solo.System.addEventListener(b,"click",function(){var c={uuid:Solo.System.data.get(this.parentNode.parentNode,
"rootuuid"),verb:"remove"};Solo.Fsfilters.toggle(c,this,function(c,a){if(1==c.success){var b=a.parentNode.parentNode;b.parentNode.removeChild(b)}})});b.insertAdjacentHTML("beforeend",'<span class="fa fa-trash-o deletebutton ak-toggle-button"></span>');a.appendChild(b);b=document.createElement("span");b.className="ak_filter_tab_icon_container btn btn-sm btn-default";Solo.System.addEventListener(b,"click",function(){var c=this.parentNode.parentNode;this.style.display="none";c.querySelector("span.delete").style.display=
"none";var a=this.parentNode,b=a.parentNode,g=document.createElement("span");g.className="ak_filter_tab_icon_container btn btn-sm btn-primary save fa fa-floppy-o ak-toggle-button ak-stacked-button";Solo.System.addEventListener(g,"click",function(){var a=c.querySelector("input.folder_editor").value,a=trim(a),b=c.querySelector("input.virtual_editor").value,b=trim(b);empty(b)&&(b=Math.uuid(8)+"-"+basename(a));var e=Solo.System.data.get(c,"def",","),e=e.split(",",2);if(""==a)if(""==e[0])Solo.System.triggerEvent(this.parentNode.querySelector("span.cancel"),
"click");else{var d=c.querySelector("span.delete");d.style.display="inline-block";Solo.System.triggerEvent(d,"click")}else d={uuid:Solo.System.data.get(c,"rootuuid"),root:a,data:b,verb:"set"},Solo.Fsfilters.toggle(d,this,function(p,d){if(1==p.success){if(""==e[0]){var f=d.parentNode.querySelector("span.editbutton");Solo.System.removeClass(f,"fa-plus-square");Solo.System.removeClass(f.parentNode,"btn-success");Solo.System.addClass(f,"fa-pencil-square ak-toggle-button");Solo.Extradirs.addNewRecordButton(m)}Solo.System.data.set(c,
"def",[a,b]);console.debug(c);c.querySelector("span.ak_directory").textContent=a;c.querySelector("span.ak_virtual").textContent=b;d.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";f=d.parentNode.querySelector("span.cancel");f.parentNode.removeChild(f);c.querySelector("span.delete").style.display="inline-block";d.parentNode.removeChild(d);f=c.querySelector("input.folder_editor");f.parentNode.removeChild(f);f=c.querySelector("input.virtual_editor");f.parentNode.removeChild(f);
f=c.querySelector("span.browse");f.parentNode.removeChild(f);c.querySelector("span.ak_directory").style.display="inline-block";c.querySelector("span.ak_virtual").style.display="inline-block"}},!1)});a.appendChild(g);g=document.createElement("span");g.className="ak_filter_tab_icon_container btn btn-sm btn-warning cancel glyphicon glyphicon-remove ak-toggle-button";Solo.System.addEventListener(g,"click",function(){this.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";
var a=this.parentNode.querySelector("span.save");a.parentNode.removeChild(a);this.parentNode.removeChild(this);a=c.querySelector("input.folder_editor");a.parentNode.removeChild(a);a=c.querySelector("input.virtual_editor");a.parentNode.removeChild(a);a=c.querySelector("span.browse");a.parentNode.removeChild(a);c.querySelector("span.ak_directory").style.display="inline-block";c.querySelector("span.ak_virtual").style.display="inline-block";a=Solo.System.data.get(c,"def",",");a=a.split(",",2);""!=a[0]&&
(c.querySelector("span.delete").style.display="inline-block")});a.appendChild(g);var a=Solo.System.data.get(c,"def",","),a=a.split(",",2),b=b.querySelector("td.ak_filter_item"),g=b.nextElementSibling,d=document.createElement("input");d.setAttribute("type","text");d.setAttribute("size","60");d.className="folder_editor";d.value=a[0];var e=document.createElement("span");e.className="ak_filter_tab_icon_container btn btn-sm btn-default browse glyphicon glyphicon-folder-open ak-toggle-button";Solo.System.addEventListener(e,
"click",function(){var a=this.parentNode.querySelector("input.folder_editor"),b=trim(a.value);""==b&&(b="[ROOTPARENT]");Solo.Configuration.onBrowser(b,a)});b.appendChild(d);b.appendChild(e);d=document.createElement("input");d.setAttribute("type","text");d.setAttribute("size","60");d.className="virtual_editor";d.value=a[1];g.appendChild(d);b.querySelector("span.ak_directory").style.display="none";g.querySelector("span.ak_virtual").style.display="none"});b.insertAdjacentHTML("beforeend",'<span class="fa fa-pencil-square editbutton ak-toggle-button"></span>');
n.appendChild(b);k.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_directory";b.textContent=e[0];k.appendChild(b);l.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_virtual";b.textContent=e[1];l.appendChild(b);h.appendChild(a);h.appendChild(n);h.appendChild(k);h.appendChild(l);m.appendChild(h)};
Solo.Extradirs.addNewRecordButton=function(a){var e=Math.uuid();Solo.Extradirs.addRow(e,["",""],a);a=document.getElementById("ak_list_contents").children;a=a[a.length-1].querySelectorAll("td");a[0].querySelector("span").style.display="none";a=a[1].querySelectorAll("span");a=a[a.length-1];Solo.System.removeClass(a,"fa-pencil-square");Solo.System.addClass(a,"fa-plus-square ak-toggle-button");Solo.System.addClass(a.parentNode,"btn-success")}; //# sourceMappingURL=extradirs.min.map
