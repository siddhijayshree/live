/*
   2014-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"==typeof Solo)var Solo={};"undefined"==typeof Solo.System&&(Solo.System={},Solo.System.notification={hasDesktopNotification:!1,iconURL:""},Solo.System.params={AjaxURL:"",useIFrame:!1,errorCallback:Solo.System.modalErrorHandler,iFrame:null,iFrameCallbackError:null,iFrameCallbackSuccess:null,password:"",errorDialogId:"errorDialog",errorDialogMessageId:"errorDialogPre"},Solo.System.translations=[],Solo.System.modalDialog=null);
Solo.System.submitForm=function(a,c){"undefined"!==typeof c&&document.querySelector("#"+a+" input[name='task']").setAttribute("value",c);document.querySelector("#"+a).submit()};Solo.System.defaultErrorHandler=function(a){null==a||"undefined"==typeof a||alert("An error has occurred\n"+a)};
Solo.System.modalErrorHandler=function(a){var c=document.getElementById(Solo.System.params.errorDialogId),d=a;null!=c&&(document.getElementById(Solo.System.params.errorDialogMessageId).innerHTML=a,d=c.innerHTML);Solo.Modal.open({content:d,width:"80%"})};Solo.System.params.errorCallback=Solo.System.modalErrorHandler;
Solo.System.doIframeCall=function(a,c,d){Solo.System.params.iFrameCallbackSuccess=c;Solo.System.params.iFrameCallbackError=d;Solo.System.params.iFrame=document.createElement("iframe");document.getElementById("response-timer");Solo.System.params.iFrame.style.display="none";Solo.System.params.iFrame.style.visibility="hidden";Solo.System.params.iFrame.style.height="1px";Solo.System.params.iFrame.setAttribute("onload",Solo.System.iframeCallback);a=Solo.System.params.AjaxURL+"&"+Solo.Ajax.interpolateParameters(a);
Solo.System.params.iFrame.setAttribute("src",a)};
Solo.System.iframeCallback=function(){var a=null,a=Solo.System.params.iFrame.contentDocument?Solo.System.params.iFrame.contentDocument:Solo.System.params.iFrame.contentWindow.document,a=a.body.innerHTML;Solo.System.params.iFrame.parentNode.removeChild(Solo.System.params.iFrame);Solo.System.params.iFrame=null;var c="",d=a.indexOf("###");if(-1==d)a="Invalid AJAX data: "+a,null==Solo.System.params.iFrameCallbackError?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):Solo.System.params.iFrameCallbackError(a);
else{0!=d?(a.substr(0,d),c=a.substr(d)):c=a;c=c.substr(3);d=c.lastIndexOf("###");c=c.substr(0,d);try{var e=JSON.parse(c)}catch(b){a=b.message+"\n<br/>\n<pre>\n"+c+"\n</pre>";null==Solo.System.params.iFrameCallbackError?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):Solo.System.params.iFrameCallbackError(a);return}Solo.System.params.iFrameCallbackSuccess(e)}};
Solo.System.doAjax=function(a,c,d,e,b){if(Solo.System.params.useIFrame)Solo.System.doIframeCall(a,c,d);else{null==e&&(e=!0);var f=(new Date).getTime()/1E3,g=parseInt(f,10);a._cacheBustingJunk=Math.round(1E3*(f-g))/1E3;null==b&&(b=6E5);a={type:"POST",url:Solo.System.params.AjaxURL,cache:!1,data:a,timeout:b,success:function(a){var b="",e=a.indexOf("###");if(-1==e)a=Solo.System.sanitizeErrorMessage(a),a="Invalid AJAX data: "+a,null==d?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):
d(a);else{0!=e?(a.substr(0,e),b=a.substr(e)):b=a;b=b.substr(3);e=b.lastIndexOf("###");b=b.substr(0,e);try{var f=JSON.parse(b)}catch(g){b=Solo.System.sanitizeErrorMessage(b);a=g.message+"\n<br/>\n<pre>\n"+b+"\n</pre>";null==d?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):d(a);return}c(f)}},error:function(a,c,b){b=a.responseText?a.responseText:"";var e="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+a.status+" ("+a.statusText+")<br/>",e=e+"Internal status: "+c+
"<br/>XHR ReadyState: "+a.readyState+"<br/>",e=e+"Raw server response:<br/>"+Solo.System.sanitizeErrorMessage(b);null==d?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(e):d(e)}};e?Solo.Ajax.enqueue(a):Solo.Ajax.ajax(a)}};Solo.System.sanitizeErrorMessage=function(a){-1<a.indexOf("<script")&&(a="(HTML containing script tags)");return a};
Solo.System.doEncryptedAjax=function(a,c,d,e,b){null==e&&(e=!0);var f=(new Date).getTime()/1E3,g=parseInt(f,10);a._cacheBustingJunk=Math.round(1E3*(f-g))/1E3;null==b&&(b=6E5);a=JSON.stringify(a);0<Solo.System.params.password.length&&(a=AesCtr.encrypt(a,Solo.System.params.password,128));b={type:"POST",url:Solo.System.params.AjaxURL,cache:!1,data:{json:a},timeout:b,success:function(a){var b="",e=a.indexOf("###");if(-1==e)a="Invalid AJAX data: "+a,null==d?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):
d(a);else{0!=e?(a.substr(0,e),b=a.substr(e)):b=a;b=b.substr(3);e=b.lastIndexOf("###");b=b.substr(0,e);0<Solo.System.params.password.length&&(b=AesCtr.decrypt(b,Solo.System.params.password,128));try{var f=JSON.parse(b)}catch(g){errorMessage=g.message+"\n<br/>\n<pre>\n"+b+"\n</pre>";null==d?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(errorMessage):d(errorMessage);return}c(f)}},error:function(a,b,c){a="AJAX Loading Error: "+b;null==d?null!=Solo.System.params.errorCallback&&
Solo.System.params.errorCallback(a):d(a)}};e?Solo.Ajax.enqueue(b):Solo.Ajax.ajax(b)};Solo.System.checkAll=function(a,c){c||(c="cb");if(a.form){for(var d=0,e=0,b=a.form.elements.length;e<b;e++){var f=a.form.elements[e];if(f.type==a.type&&(c&&0==f.id.indexOf(c)||!c))f.checked=a.checked,d+=!0==f.checked?1:0}a.form.boxchecked&&(a.form.boxchecked.value=d);return!0}return!1};Solo.System.isChecked=function(a,c){"undefined"===typeof c&&(c=document.getElementById("adminForm"));!0==a?c.boxchecked.value++:c.boxchecked.value--};
Solo.System.tableOrdering=function(a,c,d,e){"undefined"===typeof e&&(e=document.getElementById("adminForm"));e.filter_order.value=a;e.filter_order_Dir.value=c;Solo.System.submitForm(e.getAttribute("id"),d)};
Solo.System.modal=function(a){try{"undefined"!==typeof a.rel&&(rel=a.rel,a=JSON.parse(rel))}catch(c){}var d=document.createElement("div");g.setAttribute("tabindex","-1");g.setAttribute("role","dialog");g.setAttribute("aria-hidden","true");g=document.createElement("div");g.className="modal-dialog";d.appendChild(g);var e=document.createElement("div");e.className="modal-content";g.appendChild(e);if("undefined"!==typeof a.title){g=document.createElement("div");g.className="modal-header";e.appendChild(g);
var b=document.createElement("button");b.className="close";b.innerHTML="&times;";g.appendChild(b);var f=document.createElement("h4");f.className="modal-title";f.innerHTML=a.title;g.appendChild(f);"undefined"!==typeof a.CancelHandler&&Solo.System.addEventListener(b,"click",function(b){var c=a.CancelHandler;Solo.System.modalDialog.close();c(d);b.preventDefault()})}var g=document.createElement("div");g.className="modal-body";e.appendChild(g);if("undefined"===typeof a.href)g.innerHTML=a.body;else if("#"==
a.href.substr(0,1))for(b=window.document.querySelector(a.href);0<b.childNodes.length;)g.appendChild(b.childNodes[0]);else b=document.createElement("iframe"),b.src=a.href,b.width="100%",b.height=400,b.frameborder=0,b.allowtransparency=!0,g.appendChild(b),"undefined"!==typeof a.iFrameHeight&&(b.height=a.iFrameHeight),"undefined"!==typeof a.iFrameWidth&&(b.width=a.iFrameWidth);g=!0;"undefined"!==typeof a.showButtons&&(g=a.showButtons);if(g){g=document.createElement("div");g.className="modal-footer";
e.appendChild(g);e=Solo.System.translations["UI-MODAL-OK"];b=Solo.System.translations["UI-MODAL-CANCEL"];"undefined"!==typeof a.OkLabel&&(e=a.OkLabel);"undefined"!==typeof a.CancelLabel&&(b=a.CancelLabel);f=document.createElement("button");f.className="btn btn-default";f.setAttribute("type","button");f.innerHTML=b;g.appendChild(b);var h=document.createElement("button");h.className="btn btn-primary";h.setAttribute("type","button");h.innerHTML=e;g.appendChild(h);"undefined"!==typeof a.CancelHandler&&
Solo.System.addEventListener(f,"click",function(b){var c=a.CancelHandler;Solo.System.modalDialog.close();c(d);b.preventDefault()});"undefined"!==typeof a.OkHandler?Solo.System.addEventListener(h,"click",function(b){var c=a.OkHandler;Solo.System.modalDialog.close();c(d);b.preventDefault()}):Solo.System.addEventListener(h,"click",function(a){Solo.System.modalDialog.close();a.preventDefault()});""==e.trim()&&(h.style.display="none");""==b.trim()&&(f.style.display="none")}Solo.System.modalDialog=Solo.Modal.open({inherit:d,
width:"450",height:"280"})};Solo.System.notification.askPermission=function(){void 0!=window.Notification&&"default"==window.Notification.permission&&window.Notification.requestPermission()};Solo.System.notification.notify=function(a,c,d){void 0!=window.Notification&&"granted"==window.Notification.permission&&(void 0==d&&(d=5E3),void 0==c&&(body=""),a=new window.Notification(a,{body:c,icon:Solo.System.notification.iconURL}),0<d&&setTimeout(function(a){return function(){a.close()}}(a),d))};
Solo.System.data=function(){var a=0,c={};return{set:function(d,e,b){if(d.dataset)d.dataset[e]=b,null==b&&delete d.dataset[e];else{var f;void 0===d.myCustomDataTag&&(f=a++,d.myCustomDataTag=f);"undefined"==typeof c[f]&&(c[f]={});c[f][e]=b;var g="data-"+e.split(/(?=[A-Z])/).join("-").toLowerCase();d.setAttribute&&d.setAttribute(g,b);if(null==b)try{delete c[f][e],d.removeAttribute(g)}catch(h){c[f][e]=null}}},get:function(a,e,b){if(a.dataset)return"undefined"==typeof a.dataset[e]&&(a.dataset[e]=b),a.dataset[e];
"undefined"==typeof b&&(b=null);"undefined"==typeof c[a.myCustomDataTag]&&(c[a.myCustomDataTag]={});var f="data-"+e.split(/(?=[A-Z])/).join("-").toLowerCase();"undefined"!==typeof a[f]&&(c[a.myCustomDataTag][e]=a[f]);"undefined"==typeof c[a.myCustomDataTag][e]&&this.set(a,e,b);return c[a.myCustomDataTag][e]}}}();
Solo.System.addEventListener=function(a,c,d){function e(a){var b=d.apply(this,arguments);!1===b&&(a.stopPropagation()&&a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1);return b}function b(){var b=d.call(a,window.event);!1===b&&(window.event.returnValue=!1,window.event.cancelBubble=!0);return b}"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent("on"+c,b))};
Solo.System.removeEventListener=function(a,c,d){"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.removeEventListener?a.removeEventListener(c,d):a.detachEvent("on"+c,d))};
Solo.System.triggerEvent=function(a,c){if("undefined"!=typeof a&&null!==a&&("string"===typeof a&&(a=document.getElementById(a)),null!==a&&"object"==typeof a&&a instanceof Element))if(document.fireEvent&&"undefined"==typeof window.Event)a.fireEvent("on"+c);else{var d=document.createEvent("HTMLEvents");d.initEvent(c,!0,!0);a.dispatchEvent(d)}};
(function(a,c){function d(){if(!f){f=!0;for(var a=0;a<b.length;a++)b[a].fn.call(window,b[a].ctx);b=[]}}function e(){"complete"===document.readyState&&d()}c=c||Solo.System;var b=[],f=!1,g=!1;c[a||"documentReady"]=function(a,c){f?setTimeout(function(){a(c)},1):(b.push({fn:a,ctx:c}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(d,1):g||(g=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",
d,!1)):(document.attachEvent("onreadystatechange",e),window.attachEvent("onload",d))))}})("documentReady",Solo.System);Solo.System.addClass=function(a,c){if(a&&a.className){var d=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));d=array_merge(d,c);a.className="";for(property in d)d.hasOwnProperty(property)&&(a.className+=d[property]+" ");a.className.trim&&(a.className=a.className.trim())}};
Solo.System.removeClass=function(a,c){if(a&&a.className){var d=a.className.split(" ");"string"==typeof c&&(c=c.split(" "));d=array_diff(d,c);a.className="";for(property in d)d.hasOwnProperty(property)&&(a.className+=d[property]+" ");a.className.trim&&(a.className=a.className.trim())}};Solo.System.hasClass=function(a,c){if(a&&a.className){var d=a.className.split(" ");for(i=0;i<d.length;i++)if(d[i]==c)return!0;return!1}};
Solo.System.toggleClass=function(a,c){Solo.System.hasClass(a,c)?Solo.System.removeClass(a,c):Solo.System.addClass(a,c)}; //#sourceMappingURL=system.min.map
