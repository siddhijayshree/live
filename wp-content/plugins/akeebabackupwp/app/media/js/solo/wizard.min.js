/*
   2014-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"==typeof Solo)var Solo={};"undefined"==typeof Solo.Wizard&&(Solo.Wizard={URLs:{},execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}});Solo.Wizard.boot=function(){Solo.Wizard.execTimes=[30,25,20,14,7,5,3];Solo.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1];document.getElementById("backup-progress-pane").style.display="block";Solo.Backup.resetTimeoutBar();Solo.Wizard.tryAjax()};
Solo.Wizard.tryAjax=function(){Solo.System.useIFrame=!1;Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1E4,100);document.getElementById("step-ajax").className+=" label-info";document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_TRYAJAX;Solo.System.doAjax({akact:"ping"},function(){Solo.System.useIFrame=!1;var a=document.getElementById("step-ajax");a.className=a.className.replace("label-info","label-success");Solo.Wizard.minExec()},function(){Solo.System.useIFrame=
!0;Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1E4,100);document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_TRYIFRAME;Solo.System.doAjax({akact:"ping"},function(){var a=document.getElementById("step-ajax");a.className=a.className.replace("label-info","label-success");Solo.Wizard.minExec()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=
Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTUSEAJAX},!1,1E4)},!1,1E4)};
Solo.Wizard.minExec=function(a,b){null==a&&(a=0);null==b&&(b=0);Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1E3*(2*a+5),100);document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_MINEXECTRY.replace("%s",a.toFixed(1));var d=document.getElementById("step-minexec");d.className+=-1==d.className.indexOf("label-info")?" label-info":"";Solo.System.doAjax({akact:"minexec",seconds:a},function(d){b++;3>b?Solo.Wizard.minExec(a,b):Solo.Wizard.minExecApply(a)},
function(){a+=.5;20<a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEMINEXEC):Solo.Wizard.minExec(a,0)},!1,1E3*(2*a+5))};
Solo.Wizard.minExecApply=function(a){Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(25E3,100);document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_SAVEMINEXEC;var b=0;Solo.Backup.useIFrame&&(b=1);Solo.System.doAjax({akact:"applyminexec",iframes:b,minexec:a},function(a){a=document.getElementById("step-minexec");a.className=a.className.replace("label-info","label-success");Solo.Wizard.directories()},function(){document.getElementById("backup-progress-pane").style.display=
"none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTSAVEMINEXEC},!1)};
Solo.Wizard.directories=function(){Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1E4,100);document.getElementById("backup-substep").innerHTML="";document.getElementById("step-directory").className+=" label-info";Solo.System.doAjax({akact:"directories"},function(a){a?(a=document.getElementById("step-directory"),a.className=a.className.replace("label-info","label-success"),Solo.Wizard.database()):(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display=
"block",document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES)},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES},!1)};
Solo.Wizard.database=function(){Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(3E4,50);document.getElementById("backup-substep").innerHTML="";document.getElementById("step-dbopt").className+=" label-info";Solo.System.doAjax({akact:"database"},function(a){a?(a=document.getElementById("step-dbopt"),a.className=a.className.replace("label-info","label-success"),Solo.Wizard.maxExec()):(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display=
"block",document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTDBOPT)},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTDBOPT},!1)};
Solo.Wizard.maxExec=function(){var a=array_shift(Solo.Wizard.execTimes);if(empty(Solo.Wizard.execTimes)||null==a)document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_EXECTOOLOW;else{Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1200*a,80);var b=document.getElementById("step-maxexec");b.className+=-1==b.className.indexOf("label-info")?
" label-info":"";document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_MINEXECTRY.replace("%s",a.toFixed(0));Solo.System.doAjax({akact:"maxexec",seconds:a},function(b){b?Solo.Wizard.maxExecApply(a):Solo.Wizard.maxExec()},function(){Solo.Wizard.maxExec()},!1,38E3)}};
Solo.Wizard.maxExecApply=function(a){Solo.Backup.resetTimeoutBar();Solo.Backup.startTimeoutBar(1E4,100);document.getElementById("backup-substep").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_SAVINGMAXEXEC;Solo.System.doAjax({akact:"applymaxexec",seconds:a},function(){var a=document.getElementById("step-maxexec");a.className=a.className.replace("label-info","label-success");Solo.Wizard.partSize()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display=
"block";document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTSAVEMAXEXEC})};
Solo.Wizard.partSize=function(){Solo.Backup.resetTimeoutBar();var a=array_shift(Solo.Wizard.blockSizes);if(empty(Solo.Wizard.blockSizes)||null==a)document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEPARTSIZE;else{var b=a/8;Solo.Backup.startTimeoutBar(3E4,100);document.getElementById("backup-substep").textContent=
Solo.Wizard.translation.COM_AKEEBA_CONFWIZ_UI_PARTSIZE.replace("%s",b.toFixed(3));document.getElementById("step-splitsize").className+=" label-info";Solo.System.doAjax({akact:"partsize",blocks:a},function(a){a?(a=document.getElementById("step-splitsize"),a.className=a.className.replace("label-info","label-success"),Solo.Wizard.done()):Solo.Wizard.partSize()},function(a){Solo.Wizard.partSize()},!1,6E4)}};
Solo.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("backup-complete").style.display="block"};
Solo.Wizard.autodetect=function(a){a={akact:"pythia",folder:a};document.getElementById("varakeeba.advanced.embedded_installer").value="angie-generic";Solo.System.doAjax(a,function(a){if("object"===typeof a){var b=a.database.driver;document.getElementById("varakeeba.platform.scripttype").value=a.cms;document.getElementById("varakeeba.advanced.embedded_installer").value=a.installer;document.getElementById("var[akeeba.platform.dbdriver]").value=b;document.getElementById("var[akeeba.platform.dbhost]").value=
a.database.host;document.getElementById("var[akeeba.platform.dbport]").value=a.database.port;document.getElementById("var[akeeba.platform.dbusername]").value=a.database.username;document.getElementById("var[akeeba.platform.dbpassword]").value=a.database.password;document.getElementById("var[akeeba.platform.dbname]").value=a.database.name;document.getElementById("var[akeeba.platform.dbprefix]").value=a.database.prefix;document.getElementById("pythiaExtradirs").innerHTML=a.extradirs.join("<br/>");for(var b=
[],c,f=0;f<a.extradb.length;f++){var e=a.extradb[f];c="<strong>Host</strong>: "+e.host;c+=" <strong>Db</strong>: "+e.name;c+=" <strong>User</strong>: "+e.username;c+=" <strong>Prefix</strong>: "+e.prefix;b.push(c)}document.getElementById("pythiaExtradb").innerHTML=b.join("<br/>");Solo.System.triggerEvent(document.querySelector('select[id*="akeeba.platform.dbdriver"]'),"change")}});return!1};
Solo.Wizard.onDatabaseDriverChange=function(a){a=this.value.toLowerCase();document.getElementById("host-wrapper").style.display="block";document.getElementById("port-wrapper").style.display="block";document.getElementById("user-wrapper").style.display="block";document.getElementById("pass-wrapper").style.display="block";document.getElementById("name-wrapper").style.display="block";document.getElementById("prefix-wrapper").style.display="block";if("sqlite"==a||"none"==a)document.getElementById("host-wrapper").style.display=
"none",document.getElementById("port-wrapper").style.display="none",document.getElementById("user-wrapper").style.display="none",document.getElementById("pass-wrapper").style.display="none",document.querySelector('input[id*="akeeba.platform.dbhost"]').value="",document.querySelector('input[id*="akeeba.platform.dbport"]').value="",document.querySelector('input[id*="akeeba.platform.dbusername"]').value="",document.querySelector('input[id*="akeeba.platform.dbpassword"]').value="";"none"==a&&(document.getElementById("name-wrapper").style.display=
"none",document.getElementById("prefix-wrapper").style.display="none",document.querySelector('input[id*="akeeba.platform.dbname"]').value="",document.querySelector('input[id*="akeeba.platform.dbprefix"]').value="")};Solo.Wizard.onBtnBrowseClick=function(a){var b=document.getElementById("var[akeeba.platform.newroot]");Solo.Configuration.onBrowser(b.value,b);a.preventDefault();return!1};
Solo.Wizard.onBtnPythiaClick=function(a){var b=document.getElementById("var[akeeba.platform.newroot]").value;Solo.Wizard.autodetect(b);a.preventDefault();return!1}; //# sourceMappingURL=wizard.min.map
